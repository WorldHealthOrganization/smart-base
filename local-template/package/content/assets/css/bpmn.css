/* 
 * BPMN Viewer Styles for SMART Guidelines
 * Provides styling for interactive BPMN previews with compact layout
 * Complements the WHO template dark/light mode theming
 */

/* BPMN preview container */
.bpmn-preview-container {
  margin: 1.5em 0;
  border: 1px solid var(--bpmn-border-color, #dee2e6);
  border-radius: 4px;
  background: var(--bpmn-bg, #ffffff);
  overflow: hidden;
}

/* File info header - compact single line */
.bpmn-file-info {
  padding: 0.5em 1em;
  background: var(--bpmn-header-bg, #f8f9fa);
  border-bottom: 1px solid var(--bpmn-border-color, #dee2e6);
  font-size: 0.9em;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.bpmn-file-name {
  font-weight: 600;
  color: var(--bpmn-text-color, #212529);
  margin-right: 1em;
}

.bpmn-file-actions {
  display: flex;
  gap: 0.5em;
}

.bpmn-file-actions a {
  padding: 0.25em 0.75em;
  background: var(--bpmn-button-bg, #0093d0);
  color: white;
  text-decoration: none;
  border-radius: 3px;
  font-size: 0.85em;
  transition: background 0.2s;
}

.bpmn-file-actions a:hover {
  background: var(--bpmn-button-hover-bg, #007ab7);
}

/* BPMN canvas container - 50% taller (240px) */
.bpmn-canvas-container {
  height: 240px;
  width: 100%;
  position: relative;
  background: var(--bpmn-canvas-bg, #fafafa);
}

.bpmn-canvas {
  height: 100%;
  width: 100%;
}

/* Loading indicator */
.bpmn-loading {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: var(--bpmn-text-muted, #6c757d);
  font-size: 0.9em;
}

/* Error message */
.bpmn-error {
  padding: 1em;
  color: var(--bpmn-error-color, #dc3545);
  background: var(--bpmn-error-bg, #f8d7da);
  border: 1px solid var(--bpmn-error-border, #f5c6cb);
  border-radius: 3px;
  margin: 0.5em;
  font-size: 0.9em;
}

/* Light mode (default) */
:root {
  --bpmn-border-color: #dee2e6;
  --bpmn-bg: #ffffff;
  --bpmn-header-bg: #f8f9fa;
  --bpmn-text-color: #212529;
  --bpmn-text-muted: #6c757d;
  --bpmn-button-bg: #0093d0;
  --bpmn-button-hover-bg: #007ab7;
  --bpmn-canvas-bg: #fafafa;
  --bpmn-error-color: #dc3545;
  --bpmn-error-bg: #f8d7da;
  --bpmn-error-border: #f5c6cb;
}

/* Dark mode - align with WHO template theming */
[data-theme="dark"] {
  --bpmn-border-color: #30363d;
  --bpmn-bg: #1a1d23;
  --bpmn-header-bg: #2d3748;
  --bpmn-text-color: #e6edf3;
  --bpmn-text-muted: #8b949e;
  --bpmn-button-bg: #4db8e8;
  --bpmn-button-hover-bg: #3a9dd4;
  --bpmn-canvas-bg: #0d1117;
  --bpmn-error-color: #f97583;
  --bpmn-error-bg: #3b1219;
  --bpmn-error-border: #6e2d2d;
}

/* Fallback for system preference when no explicit theme */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bpmn-border-color: #30363d;
    --bpmn-bg: #1a1d23;
    --bpmn-header-bg: #2d3748;
    --bpmn-text-color: #e6edf3;
    --bpmn-text-muted: #8b949e;
    --bpmn-button-bg: #4db8e8;
    --bpmn-button-hover-bg: #3a9dd4;
    --bpmn-canvas-bg: #0d1117;
    --bpmn-error-color: #f97583;
    --bpmn-error-bg: #3b1219;
    --bpmn-error-border: #6e2d2d;
  }
}

/* Legacy support for existing .bpmn class on images */
img.bpmn {
  max-width: 100%;
  height: auto;
  border: 1px solid var(--bpmn-border-color);
  border-radius: 4px;
  margin: 1em 0;
}

/* Business process container from XSL */
.businessprocess {
  width: 90%;
  display: block;
  margin: 1.5em 0;
}

.businessprocess object {
  width: 100%;
  height: auto;
  min-height: 240px;
  border: 1px solid var(--bpmn-border-color);
  border-radius: 4px;
  background: var(--bpmn-canvas-bg);
}
